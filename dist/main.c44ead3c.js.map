{"version":3,"sources":["main.js"],"names":["siteData","JSON","parse","localStorage","getItem","href","favicon","logo","text","init","backImage","render","$","document","keydown","keyOpen","bind","addCard","focus","off","blur","remove","each","index","node","$li","loadImage","parent","before","contextmenu","e","stopPropagation","preventDefault","splice","url","prompt","pattern","realUrl","match","replace","card","unshift","key","toLowerCase","window","open","$sitebox","children","$logo","get","$text","img","Image","onload","$img","addClass","src","width","Math","ceil","height","random","ImgUrl","css","onbeforeunload","data","stringify","setItem"],"mappings":"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","file":"main.c44ead3c.js","sourceRoot":"..\\src","sourcesContent":["//获取站点数据对象\nconst siteData = JSON.parse(localStorage.getItem('siteData')) || [\n  {\n    href: 'https://github.com',\n    favicon: 'https://api.faviconkit.com/github.com/144',\n    logo: 'g',\n    text: 'github.com'\n  },\n  {\n    href: 'https://developer.mozilla.org',\n    favicon: 'https://api.faviconkit.com/developer.mozilla.org/144',\n    logo: 'd',\n    text: 'developer.mozilla.org'\n  },\n  {\n    href: 'https://store.steampowered.com',\n    favicon: 'https://api.faviconkit.com/store.steampowered.com/144',\n    logo: 's',\n    text: 'store.steampowered.com'\n  },\n  {\n    href: 'https://store.ubi.com',\n    favicon: 'https://api.faviconkit.com/store.ubi.com/144',\n    logo: 's',\n    text: 'store.ubi.com'\n  },\n  {\n    href: 'https://www.facebook.com',\n    favicon: 'https://api.faviconkit.com/facebook.com/144',\n    logo: 'f',\n    text: 'facebook.com'\n  },\n  {\n    href: 'https://twitter.com',\n    favicon: 'https://api.faviconkit.com/twitter.com/144',\n    logo: 't',\n    text: 'twitter.com'\n  },\n  {\n    href: 'https://www.iconfont.cn',\n    favicon: 'https://api.faviconkit.com/iconfont.cn/144',\n    logo: 'i',\n    text: 'iconfont.cn'\n  },\n  {\n    href: 'https://www.ele.me',\n    favicon: 'https://api.faviconkit.com/ele.me/144',\n    logo: 'e',\n    text: 'ele.me'\n  },\n  {\n    href: 'https://youtube.com',\n    favicon: 'https://api.faviconkit.com/youtube.com/144',\n    logo: 'y',\n    text: 'youtube.com'\n  }\n];\n\nconst init = () => {\n  //请求背景图\n  backImage();\n  //渲染初始列表\n  render();\n  //设置监听\n  $(document).keydown(keyOpen);\n  $('.siteLast').bind('click', addCard);\n  $('#search').focus(function() {\n    $(document).off();\n  });\n  $('#search').blur(function() {\n    $(document).keydown(keyOpen);\n  });\n};\n\nconst render = () => {\n  //清空\n  $('.siteMain li[name!=\"addCard\"]').remove();\n  //重新渲染\n  $.each(siteData, (index, node) => {\n    const $li = $(`\n    <li>\n      <a href=${node.href} >\n        <div class=\"siteContainer\" >\n          <div class=\"logo\">\n              <svg class=\"icon\" aria-hidden=\"true\">\n                <use xlink:href=\"#icon-loading\"></use>\n                <animateTransform\n                      attributeName=\"transform\"\n                      attributeType=\"XML\"\n                      type=\"rotate\"\n                      from=\"0\"\n                      to=\"360\"\n                      dur=\"3\"\n                      repeatCount=\"indefinite\" />\n              </svg>\n          </div>\n          <div class=\"text\">${node.text}</div>\n        </div>\n      </a>\n    </li>\n    `);\n\n    //加载图片\n    loadImage($li, node);\n    //渲染到新增Card前面\n    $('.siteLast')\n      .parent()\n      .before($li);\n    //绑定删除事件\n    $li.contextmenu(e => {\n      e.stopPropagation(); // 阻止冒泡\n      e.preventDefault(); //阻止默认\n      siteData.splice(index, 1);\n      $li.remove();\n      // render();\n    });\n  });\n};\n\nconst addCard = () => {\n  const url = prompt('请输入要添加的网址', 'https://');\n  const pattern = /(http|https):\\/\\/(www.)?(\\w+(\\.)?)+/;\n  const realUrl = url.match(pattern)[0];\n  const text = realUrl.replace(/(http|https):\\/\\/(www.)?/, '');\n  const favicon = `https://api.faviconkit.com/${text}/144`;\n  //检测图片\n  let card = {\n    href: realUrl,\n    favicon: favicon,\n    logo: text[0],\n    text: text\n  };\n  siteData.unshift(card);\n  render();\n};\n\nconst keyOpen = e => {\n  const { key } = e;\n  $.each(siteData, (index, node) => {\n    if (node.text[0].toLowerCase() === key) {\n      window.open(node.href);\n      return false;\n    }\n  });\n};\n\n//Image\nconst loadImage = ($li, node) => {\n  const $sitebox = $li.children().children();\n  const $logo = $($sitebox.children().get(0));\n  const $text = $($sitebox.children().get(1));\n  const img = new Image();\n  img.onload = function() {\n    const $img = $(img);\n    $logo.remove();\n    $text.before($img.addClass('logo'));\n  };\n  img.src = node.favicon;\n};\n\nconst backImage = () => {\n  const width = Math.ceil($('body').width());\n  const height = Math.ceil($('body').height());\n  const random = Math.ceil(Math.random() * 10);\n  const ImgUrl = `https://picsum.photos/${width}/${height}/?blur=${random}`;\n  if (width > 500) {\n    $('body').css('background-image', `url(${ImgUrl})`);\n  }\n};\n\n//离开保存;\nonbeforeunload = () => {\n  const data = JSON.stringify(siteData);\n  localStorage.setItem('siteData', data);\n};\n\n//初始化\ninit();\n"]}